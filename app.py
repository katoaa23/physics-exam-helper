# –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
from flask import Flask, render_template, request, jsonify
import math

app = Flask(__name__)

# –®–∞–≥ 2: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –±—ã–ª–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
formulas = [
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–ü—É—Ç—å –ø—Ä–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏', ['static/images/f1.jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å', ['static/images/f2.jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–≤–Ω–æ—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏', ['static/images/f3.jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏', ['static/images/f4.jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–≤–Ω–æ—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏', ['static/images/f5(1).jpg', 'static/images/f5(2).jpg', 'static/images/f5(3).jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –ø—Ä–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º –±—Ä–æ—Å–∫–µ', ['static/images/f6(1).jpg', 'static/images/f6(2).jpg', 'static/images/f6(3).jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–í—Ä–µ–º—è –ø–æ–¥—ä–µ–º–∞', ['static/images/f7.jpg']),
    ('–ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞', '–ü–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–ª–µ—Ç–∞', ['static/images/f8.jpg']),
    ('–î–∏–Ω–∞–º–∏–∫–∞', '–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞', ['static/images/f9.jpg']),
    ('–î–∏–Ω–∞–º–∏–∫–∞', '–¢—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞', ['static/images/f10.jpg']),
    ('–î–∏–Ω–∞–º–∏–∫–∞', '–°–∏–ª–∞ —É–ø—Ä—É–≥–æ—Å—Ç–∏', ['static/images/f11.jpg']),
    ('–î–∏–Ω–∞–º–∏–∫–∞', '–ó–∞–∫–æ–Ω –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç—è–≥–æ—Ç–µ–Ω–∏—è', ['static/images/f12.jpg']),
    ('–î–∏–Ω–∞–º–∏–∫–∞', '–ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å', ['static/images/f13.jpg']),
    ('–°—Ç–∞—Ç–∏–∫–∞', '–ú–æ–º–µ–Ω—Ç —Å–∏–ª—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ä–º—É–ª—ã', ['static/images/f14.jpg']),
    ('–°—Ç–∞—Ç–∏–∫–∞', '–£—Å–ª–æ–≤–∏–µ –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Ç–µ–ª–æ –Ω–µ –±—É–¥–µ—Ç –≤—Ä–∞—â–∞—Ç—å—Å—è', ['static/images/f15.jpg']),
    ('–ì–∏–¥—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—ë—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ä–º—É–ª–æ–π', ['static/images/f16.jpg']),
    ('–ì–∏–¥—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–î–∞–≤–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç–æ–ª–± –∂–∏–¥–∫–æ—Å—Ç–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ', ['static/images/f17.jpg']),
    ('–ì–∏–¥—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–ò–¥–µ–∞–ª—å–Ω—ã–π –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Å—Å', ['static/images/f18.jpg']),
    ('–ì–∏–¥—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–õ—é–±–æ–π –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Å—Å', ['static/images/f19.jpg']),
    ('–ì–∏–¥—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–°–∏–ª–∞ –ê—Ä—Ö–∏–º–µ–¥–∞', ['static/images/f20.jpg']),
    ('–ò–º–ø—É–ª—å—Å', '–ò–º–ø—É–ª—å—Å —Ç–µ–ª–∞', ['static/images/f21.jpg']),
    ('–ò–º–ø—É–ª—å—Å', '–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ —Ç–µ–ª–∞ –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã —Ç–µ–ª', ['static/images/f22.jpg']),
    ('–ò–º–ø—É–ª—å—Å', '–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞ –≤ –∏–º–ø—É–ª—å—Å–Ω–æ–π —Ñ–æ—Ä–º–µ', ['static/images/f23.jpg']),
    ('–ò–º–ø—É–ª—å—Å', '–ó–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–∞', ['static/images/f24.jpg']),
    ('–†–∞–±–æ—Ç–∞, –º–æ—â–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è', '–†–∞–±–æ—Ç–∞', ['static/images/f25.jpg']),
    ('–†–∞–±–æ—Ç–∞, –º–æ—â–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è', '–ú–æ—â–Ω–æ—Å—Ç—å', ['static/images/f26.jpg']),
    ('–†–∞–±–æ—Ç–∞, –º–æ—â–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è', '–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è', ['static/images/f27.jpg']),
    ('–†–∞–±–æ—Ç–∞, –º–æ—â–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è', '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è', ['static/images/f28.jpg']),
    ('–†–∞–±–æ—Ç–∞, –º–æ—â–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è', '–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ª–µ–∑–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è', ['static/images/f29.jpg']),
    ('–¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∞', '–ü–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∏', ['static/images/f30.jpg']),
    ('–¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∞', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–ø–ª–æ—Ç—ã', ['static/images/f31.jpg']),
    ('–¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∞', '–†–∞–±–æ—Ç–∞ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –≥–∞–∑–∞', ['static/images/f32.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–ó–∞–∫–æ–Ω –ö—É–ª–æ–Ω–∞', ['static/images/f33.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–ù–∞–ø—Ä—è–∂–µ–Ω–Ω–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—è', ['static/images/f34.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞—Ç–∏–∫–∞', '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ', ['static/images/f35.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫', '–ó–∞–∫–æ–Ω –û–º–∞', ['static/images/f36.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫', '–†–∞–±–æ—Ç–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞', ['static/images/f37.jpg']),
    ('–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫', '–°–∏–ª–∞ —Ç–æ–∫–∞', ['static/images/f38.jpg']),
    ('–ú–∞–≥–Ω–µ—Ç–∏–∑–º', '–°–∏–ª–∞ –ê–º–ø–µ—Ä–∞', ['static/images/f39.jpg']),
    ('–ú–∞–≥–Ω–µ—Ç–∏–∑–º', '–≠–î–° –∏–Ω–¥—É–∫—Ü–∏–∏', ['static/images/f40.jpg']),
    ('–ú–∞–≥–Ω–µ—Ç–∏–∑–º', '–°–∏–ª–∞ –õ–æ—Ä–µ–Ω—Ü–∞', ['static/images/f41.jpg']),
    ('–û–ø—Ç–∏–∫–∞', '–ó–∞–∫–æ–Ω –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è', ['static/images/f42.jpg']),
    ('–û–ø—Ç–∏–∫–∞', '–§–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã', ['static/images/f43.jpg']),
    ('–û–ø—Ç–∏–∫–∞', '–û–ø—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏–Ω–∞', ['static/images/f44.jpg']),
    ('–ê—Ç–æ–º–Ω–∞—è –∏ —è–¥–µ—Ä–Ω–∞—è —Ñ–∏–∑–∏–∫–∞', '–≠–Ω–µ—Ä–≥–∏—è –∫–≤–∞–Ω—Ç–∞', ['static/images/f45.jpg']),
    ('–ê—Ç–æ–º–Ω–∞—è –∏ —è–¥–µ—Ä–Ω–∞—è —Ñ–∏–∑–∏–∫–∞', '–ó–∞–∫–æ–Ω —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞', ['static/images/f46.jpg']),
    ('–ê—Ç–æ–º–Ω–∞—è –∏ —è–¥–µ—Ä–Ω–∞—è —Ñ–∏–∑–∏–∫–∞', '–í—Ç–æ—Ä–æ–π –ø–æ—Å—Ç—É–ª–∞—Ç –ë–æ—Ä–∞ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —á–∞—Å—Ç–æ—Ç', ['static/images/f47.jpg']),
    ('–û—Å–Ω–æ–≤—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', '–†–µ–ª—è—Ç–∏–≤–∏—Å—Ç—Å–∫–∞—è –º–∞—Å—Å–∞', ['static/images/f48.jpg']),
    ('–û—Å–Ω–æ–≤—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', '–ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è', ['static/images/f49.jpg']),
    ('–û—Å–Ω–æ–≤—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', '–≠–Ω–µ—Ä–≥–∏—è –ø–æ–∫–æ—è —Ç–µ–ª–∞', ['static/images/f50.jpg']),
]

# –®–∞–≥ 3: –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª (–£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø)
# –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥–∞—è —Ñ–æ—Ä–º—É–ª–∞ ‚Äî —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
formula_definitions = {
    # ========== –ö–ò–ù–ï–ú–ê–¢–ò–ö–ê ==========
    '–ü—É—Ç—å –ø—Ä–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏': {
        'formula': 's = v √ó t',  # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞
        'parameters': ['v', 't'],  # –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω—ã
        'calculation': 'v * t',  # –ö–∞–∫ –≤—ã—á–∏—Å–ª—è—Ç—å (–ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞!)
        'units': {'v': '–º/—Å', 't': '—Å', 'result': '–º'},  # –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
        'description': '–†–∞—Å—á–µ—Ç –ø—É—Ç–∏ –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏'
    },
    
    '–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å': {
        'formula': 'v_—Å—Ä = s / t',
        'parameters': ['s', 't'],
        'calculation': 's / t',
        'units': {'s': '–º', 't': '—Å', 'result': '–º/—Å'}
    },
    
    '–£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–≤–Ω–æ—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏': {
        'formula': 'a = (v - v‚ÇÄ) / t',
        'parameters': ['v', 'v0', 't'],
        'calculation': '(v - v0) / t',
        'units': {'v': '–º/—Å', 'v0': '–º/—Å', 't': '—Å', 'result': '–º/—Å¬≤'}
    },
    
    '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏': {
        'formula': 'v = v‚ÇÄ + a √ó t',
        'parameters': ['v0', 'a', 't'],
        'calculation': 'v0 + a * t',
        'units': {'v0': '–º/—Å', 'a': '–º/—Å¬≤', 't': '—Å', 'result': '–º/—Å'}
    },
    
    '–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–≤–Ω–æ—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏': {
        'formula': 's = v‚ÇÄ√ót + (a√ót¬≤)/2',
        'parameters': ['v0', 'a', 't'],
        'calculation': 'v0 * t + 0.5 * a * t**2',
        'units': {'v0': '–º/—Å', 'a': '–º/—Å¬≤', 't': '—Å', 'result': '–º'}
    },
    
    '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –ø—Ä–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º –±—Ä–æ—Å–∫–µ': {
        'formula': 'h_max = v‚ÇÄ¬≤ / (2 √ó g)',
        'parameters': ['v0', 'g'],
        'calculation': 'v0**2 / (2 * g)',
        'units': {'v0': '–º/—Å', 'g': '–º/—Å¬≤', 'result': '–º'}
    },
    
    '–í—Ä–µ–º—è –ø–æ–¥—ä–µ–º–∞': {
        'formula': 't_–ø–æ–¥ = v‚ÇÄ / g',
        'parameters': ['v0', 'g'],
        'calculation': 'v0 / g',
        'units': {'v0': '–º/—Å', 'g': '–º/—Å¬≤', 'result': '—Å'}
    },
    
    '–ü–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–ª–µ—Ç–∞': {
        'formula': 't_–ø–æ–ª = 2 √ó v‚ÇÄ / g',
        'parameters': ['v0', 'g'],
        'calculation': '2 * v0 / g',
        'units': {'v0': '–º/—Å', 'g': '–º/—Å¬≤', 'result': '—Å'}
    },
    
    # ========== –î–ò–ù–ê–ú–ò–ö–ê ==========
    '–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞': {
        'formula': 'F = m √ó a',
        'parameters': ['m', 'a'],
        'calculation': 'm * a',
        'units': {'m': '–∫–≥', 'a': '–º/—Å¬≤', 'result': '–ù'}
    },
    
    '–¢—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞': {
        'formula': 'F‚ÇÅ‚ÇÇ = -F‚ÇÇ‚ÇÅ',
        'parameters': ['F'],
        'calculation': '-F',  # –ü—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º –∑–Ω–∞–∫
        'units': {'F': '–ù', 'result': '–ù'},
        'note': '–°–∏–ª—ã —Ä–∞–≤–Ω—ã –ø–æ –º–æ–¥—É–ª—é –∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é'
    },
    
    '–°–∏–ª–∞ —É–ø—Ä—É–≥–æ—Å—Ç–∏': {
        'formula': 'F_—É–ø—Ä = k √ó x',
        'parameters': ['k', 'x'],
        'calculation': 'k * x',
        'units': {'k': '–ù/–º', 'x': '–º', 'result': '–ù'}
    },
    
    '–ó–∞–∫–æ–Ω –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç—è–≥–æ—Ç–µ–Ω–∏—è': {
        'formula': 'F = G √ó (m‚ÇÅ √ó m‚ÇÇ) / r¬≤',
        'parameters': ['G', 'm1', 'm2', 'r'],
        'calculation': 'G * m1 * m2 / (r**2)',
        'units': {'G': '–ù¬∑–º¬≤/–∫–≥¬≤', 'm1': '–∫–≥', 'm2': '–∫–≥', 'r': '–º', 'result': '–ù'}
    },
    
    '–ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å': {
        'formula': 'v‚ÇÅ = ‚àö(g √ó R)',
        'parameters': ['g', 'R'],
        'calculation': 'sqrt(g * R)',  # –ò—Å–ø–æ–ª—å–∑—É–µ–º sqrt –∏–∑ math!
        'units': {'g': '–º/—Å¬≤', 'R': '–º', 'result': '–º/—Å'}
    },
    
    # ========== –°–¢–ê–¢–ò–ö–ê ==========
    '–ú–æ–º–µ–Ω—Ç —Å–∏–ª—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ä–º—É–ª—ã': {
        'formula': 'M = F √ó l',
        'parameters': ['F', 'l'],
        'calculation': 'F * l',
        'units': {'F': '–ù', 'l': '–º', 'result': '–ù¬∑–º'}
    },
    
    '–£—Å–ª–æ–≤–∏–µ –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Ç–µ–ª–æ –Ω–µ –±—É–¥–µ—Ç –≤—Ä–∞—â–∞—Ç—å—Å—è': {
        'formula': 'Œ£M = 0',
        'parameters': ['M1', 'M2', 'M3'],  # –ü—Ä–∏–º–µ—Ä: —Å—É–º–º–∞ –º–æ–º–µ–Ω—Ç–æ–≤
        'calculation': 'M1 + M2 + M3',
        'units': {'M1': '–ù¬∑–º', 'M2': '–ù¬∑–º', 'M3': '–ù¬∑–º', 'result': '–ù¬∑–º'},
        'note': '–°—É–º–º–∞ –º–æ–º–µ–Ω—Ç–æ–≤ —Å–∏–ª –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–∞ 0'
    },
    
    # ========== –ì–ò–î–†–û–°–¢–ê–¢–ò–ö–ê ==========
    '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—ë—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ä–º—É–ª–æ–π': {
        'formula': 'p = F / S',
        'parameters': ['F', 'S'],
        'calculation': 'F / S',
        'units': {'F': '–ù', 'S': '–º¬≤', 'result': '–ü–∞'}
    },
    
    '–î–∞–≤–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç–æ–ª–± –∂–∏–¥–∫–æ—Å—Ç–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ': {
        'formula': 'p = œÅ √ó g √ó h',
        'parameters': ['rho', 'g', 'h'],
        'calculation': 'rho * g * h',
        'units': {'rho': '–∫–≥/–º¬≥', 'g': '–º/—Å¬≤', 'h': '–º', 'result': '–ü–∞'}
    },
    
    '–ò–¥–µ–∞–ª—å–Ω—ã–π –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Å—Å': {
        'formula': 'F‚ÇÅ / F‚ÇÇ = S‚ÇÅ / S‚ÇÇ',
        'parameters': ['F1', 'S1', 'S2'],  # –ù–∞—Ö–æ–¥–∏–º F2
        'calculation': 'F1 * S2 / S1',
        'units': {'F1': '–ù', 'S1': '–º¬≤', 'S2': '–º¬≤', 'result': '–ù'}
    },
    
    '–õ—é–±–æ–π –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Å—Å': {
        'formula': 'F‚ÇÅ / S‚ÇÅ = F‚ÇÇ / S‚ÇÇ',
        'parameters': ['F1', 'S1', 'S2'],
        'calculation': 'F1 * S2 / S1',
        'units': {'F1': '–ù', 'S1': '–º¬≤', 'S2': '–º¬≤', 'result': '–ù'}
    },
    
    '–°–∏–ª–∞ –ê—Ä—Ö–∏–º–µ–¥–∞': {
        'formula': 'F_A = œÅ √ó g √ó V',
        'parameters': ['rho', 'g', 'V'],
        'calculation': 'rho * g * V',
        'units': {'rho': '–∫–≥/–º¬≥', 'g': '–º/—Å¬≤', 'V': '–º¬≥', 'result': '–ù'}
    },
    
    # ========== –ò–ú–ü–£–õ–¨–° ==========
    '–ò–º–ø—É–ª—å—Å —Ç–µ–ª–∞': {
        'formula': 'p = m √ó v',
        'parameters': ['m', 'v'],
        'calculation': 'm * v',
        'units': {'m': '–∫–≥', 'v': '–º/—Å', 'result': '–∫–≥¬∑–º/—Å'}
    },
    
    '–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ —Ç–µ–ª–∞ –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã —Ç–µ–ª': {
        'formula': 'Œîp = p‚ÇÇ - p‚ÇÅ',
        'parameters': ['p2', 'p1'],
        'calculation': 'p2 - p1',
        'units': {'p1': '–∫–≥¬∑–º/—Å', 'p2': '–∫–≥¬∑–º/—Å', 'result': '–∫–≥¬∑–º/—Å'}
    },
    
    '–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞ –≤ –∏–º–ø—É–ª—å—Å–Ω–æ–π —Ñ–æ—Ä–º–µ': {
        'formula': 'F = Œîp / Œît',
        'parameters': ['delta_p', 'delta_t'],
        'calculation': 'delta_p / delta_t',
        'units': {'delta_p': '–∫–≥¬∑–º/—Å', 'delta_t': '—Å', 'result': '–ù'}
    },
    
    '–ó–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–∞': {
        'formula': 'p‚ÇÅ + p‚ÇÇ = p‚ÇÅ\' + p‚ÇÇ\'',
        'parameters': ['p1', 'p2'],  # –£–ø—Ä–æ—â–µ–Ω–Ω–æ: —Å—É–º–º–∞ –¥–æ = —Å—É–º–º–∞ –ø–æ—Å–ª–µ
        'calculation': 'p1 + p2',
        'units': {'p1': '–∫–≥¬∑–º/—Å', 'p2': '–∫–≥¬∑–º/—Å', 'result': '–∫–≥¬∑–º/—Å'},
        'note': '–°—É–º–º–∞ –∏–º–ø—É–ª—å—Å–æ–≤ –¥–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è'
    },
    
    # ========== –†–ê–ë–û–¢–ê, –ú–û–©–ù–û–°–¢–¨, –≠–ù–ï–†–ì–ò–Ø ==========
    '–†–∞–±–æ—Ç–∞': {
        'formula': 'A = F √ó s √ó cos(Œ±)',
        'parameters': ['F', 's', 'alpha'],  # ‚Üê alpha –≤ –≥—Ä–∞–¥—É—Å–∞—Ö!
        'calculation': 'F * s * cos(radians(alpha))',  # ‚Üê radians!
        'units': {'F': '–ù', 's': '–º', 'alpha': '¬∞', 'result': '–î–∂'},
        'note': 'Œ± - —É–≥–æ–ª –º–µ–∂–¥—É —Å–∏–ª–æ–π –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º'
    },
    
    '–ú–æ—â–Ω–æ—Å—Ç—å': {
        'formula': 'P = A / t',
        'parameters': ['A', 't'],
        'calculation': 'A / t',
        'units': {'A': '–î–∂', 't': '—Å', 'result': '–í—Ç'}
    },
    
    '–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è': {
        'formula': 'E_k = (m √ó v¬≤) / 2',
        'parameters': ['m', 'v'],
        'calculation': '0.5 * m * v**2',
        'units': {'m': '–∫–≥', 'v': '–º/—Å', 'result': '–î–∂'}
    },
    
    '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è': {
        'formula': 'E_p = m √ó g √ó h',
        'parameters': ['m', 'g', 'h'],
        'calculation': 'm * g * h',
        'units': {'m': '–∫–≥', 'g': '–º/—Å¬≤', 'h': '–º', 'result': '–î–∂'}
    },
    
    '–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ª–µ–∑–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è': {
        'formula': 'Œ∑ = (A_–ø–æ–ª–µ–∑–Ω / A_–∑–∞—Ç—Ä–∞—á) √ó 100%',
        'parameters': ['A_pol', 'A_zat'],
        'calculation': '(A_pol / A_zat) * 100',
        'units': {'A_pol': '–î–∂', 'A_zat': '–î–∂', 'result': '%'}
    },
    
    # ========== –¢–ï–†–ú–û–î–ò–ù–ê–ú–ò–ö–ê ==========
    '–ü–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫–∏': {
        'formula': 'ŒîU = Q - A',
        'parameters': ['Q', 'A'],
        'calculation': 'Q - A',
        'units': {'Q': '–î–∂', 'A': '–î–∂', 'result': '–î–∂'}
    },
    
    '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–ø–ª–æ—Ç—ã': {
        'formula': 'Q = c √ó m √ó Œît',
        'parameters': ['c', 'm', 'delta_t'],
        'calculation': 'c * m * delta_t',
        'units': {'c': '–î–∂/(–∫–≥¬∑¬∞C)', 'm': '–∫–≥', 'delta_t': '¬∞C', 'result': '–î–∂'}
    },
    
    '–†–∞–±–æ—Ç–∞ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –≥–∞–∑–∞': {
        'formula': 'A = p √ó ŒîV',
        'parameters': ['p', 'delta_V'],
        'calculation': 'p * delta_V',
        'units': {'p': '–ü–∞', 'delta_V': '–º¬≥', 'result': '–î–∂'}
    },
    
    # ========== –≠–õ–ï–ö–¢–†–û–°–¢–ê–¢–ò–ö–ê ==========
    '–ó–∞–∫–æ–Ω –ö—É–ª–æ–Ω–∞': {
        'formula': 'F = k √ó |q‚ÇÅ √ó q‚ÇÇ| / r¬≤',
        'parameters': ['k', 'q1', 'q2', 'r'],
        'calculation': 'k * abs(q1 * q2) / (r**2)',
        'units': {'k': '–ù¬∑–º¬≤/–ö–ª¬≤', 'q1': '–ö–ª', 'q2': '–ö–ª', 'r': '–º', 'result': '–ù'}
    },
    
    '–ù–∞–ø—Ä—è–∂–µ–Ω–Ω–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—è': {
        'formula': 'E = F / q',
        'parameters': ['F', 'q'],
        'calculation': 'F / q',
        'units': {'F': '–ù', 'q': '–ö–ª', 'result': '–ù/–ö–ª (–í/–º)'}
    },
    
    '–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ': {
        'formula': 'U = A / q',
        'parameters': ['A', 'q'],
        'calculation': 'A / q',
        'units': {'A': '–î–∂', 'q': '–ö–ª', 'result': '–í'}
    },
    
    # ========== –≠–õ–ï–ö–¢–†–ò–ß–ï–°–ö–ò–ô –¢–û–ö ==========
    '–ó–∞–∫–æ–Ω –û–º–∞': {
        'formula': 'I = U / R',
        'parameters': ['U', 'R'],
        'calculation': 'U / R',
        'units': {'U': '–í', 'R': '–û–º', 'result': '–ê'}
    },
    
    '–†–∞–±–æ—Ç–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞': {
        'formula': 'A = I √ó U √ó t',
        'parameters': ['I', 'U', 't'],
        'calculation': 'I * U * t',
        'units': {'I': '–ê', 'U': '–í', 't': '—Å', 'result': '–î–∂'}
    },
    
    '–°–∏–ª–∞ —Ç–æ–∫–∞': {
        'formula': 'I = q / t',
        'parameters': ['q', 't'],
        'calculation': 'q / t',
        'units': {'q': '–ö–ª', 't': '—Å', 'result': '–ê'}
    },
    
    # ========== –ú–ê–ì–ù–ï–¢–ò–ó–ú ==========
    '–°–∏–ª–∞ –ê–º–ø–µ—Ä–∞': {
    'formula': 'F = B √ó I √ó L √ó sin(Œ±)',
    'parameters': ['B', 'I', 'L', 'alpha'],  # ‚Üê alpha –≤ –≥—Ä–∞–¥—É—Å–∞—Ö!
    'calculation': 'B * I * L * sin(radians(alpha))',  # ‚Üê radians!
    'units': {'B': '–¢–ª', 'I': '–ê', 'L': '–º', 'alpha': '¬∞', 'result': '–ù'},
    'note': 'Œ± - —É–≥–æ–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –∏ –≤–µ–∫—Ç–æ—Ä–æ–º –º–∞–≥–Ω–∏—Ç–Ω–æ–π –∏–Ω–¥—É–∫—Ü–∏–∏'
},
    
    '–≠–î–° –∏–Ω–¥—É–∫—Ü–∏–∏': {
        'formula': 'Œµ = -ŒîŒ¶ / Œît',
        'parameters': ['delta_phi', 'delta_t'],
        'calculation': '-delta_phi / delta_t',
        'units': {'delta_phi': '–í–±', 'delta_t': '—Å', 'result': '–í'}
    },
    
    '–°–∏–ª–∞ –õ–æ—Ä–µ–Ω—Ü–∞': {
        'formula': 'F = |q| √ó v √ó B √ó sin(Œ±)',
        'parameters': ['q', 'v', 'B', 'alpha'],  # ‚Üê alpha –≤ –≥—Ä–∞–¥—É—Å–∞—Ö!
        'calculation': 'abs(q) * v * B * sin(radians(alpha))',  # ‚Üê radians!
        'units': {'q': '–ö–ª', 'v': '–º/—Å', 'B': '–¢–ª', 'alpha': '¬∞', 'result': '–ù'},
        'note': 'Œ± - —É–≥–æ–ª –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–∞–º–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –º–∞–≥–Ω–∏—Ç–Ω–æ–π –∏–Ω–¥—É–∫—Ü–∏–∏'
    },
    
    # ========== –û–ü–¢–ò–ö–ê ==========
    '–ó–∞–∫–æ–Ω –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è': {
        'formula': 'n‚ÇÅ √ó sin(Œ±) = n‚ÇÇ √ó sin(Œ≤)',
        'parameters': ['n1', 'alpha', 'n2'],  # ‚Üê –ù–∞—Ö–æ–¥–∏–º sin(beta) –∏–ª–∏ beta
        'calculation': 'asin((n1 * sin(radians(alpha))) / n2)',  # ‚Üê –ù–∞—Ö–æ–¥–∏–º —É–≥–æ–ª beta –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö
        'units': {'n1': '', 'alpha': '¬∞', 'n2': '', 'result': '¬∞'},
        'note': '–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —É–≥–æ–ª Œ≤ –≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ä–µ–¥–µ',
    },
    
    '–§–æ—Ä–º—É–ª–∞ —Ç–æ–Ω–∫–æ–π –ª–∏–Ω–∑—ã': {
        'formula': '1/F = 1/d + 1/f',
        'parameters': ['d', 'f'],
        'calculation': '1 / d + 1 / f',
        'units': {'d': '–º', 'f': '–º', 'result': '1/–º (–¥–∏–æ–ø—Ç—Ä–∏–∏)'}
    },
    
    '–û–ø—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏–Ω–∞': {
        'formula': 'L = n √ó l',
        'parameters': ['n', 'l'],
        'calculation': 'n * l',
        'units': {'n': '', 'l': '–º', 'result': '–º'}
    },
    
    # ========== –ê–¢–û–ú–ù–ê–Ø –§–ò–ó–ò–ö–ê ==========
    '–≠–Ω–µ—Ä–≥–∏—è –∫–≤–∞–Ω—Ç–∞': {
        'formula': 'E = h √ó ŒΩ',
        'parameters': ['h', 'nu'],
        'calculation': 'h * nu',
        'units': {'h': '–î–∂¬∑—Å', 'nu': '–ì—Ü', 'result': '–î–∂'}
    },
    
    '–ó–∞–∫–æ–Ω —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞': {
        'formula': 'N = N‚ÇÄ √ó (1/2)^(t / T)',
        'parameters': ['N0', 'T', 't'],
        'calculation': 'N0 * (0.5)**(t / T)',
        'units': {'N0': '—à—Ç', 'T': '—Å', 't': '—Å', 'result': '—à—Ç'}
    },
    
    '–í—Ç–æ—Ä–æ–π –ø–æ—Å—Ç—É–ª–∞—Ç –ë–æ—Ä–∞ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —á–∞—Å—Ç–æ—Ç': {
        'formula': 'ŒΩ = (E‚ÇÇ - E‚ÇÅ) / h',
        'parameters': ['E2', 'E1', 'h'],
        'calculation': '(E2 - E1) / h',
        'units': {'E1': '–î–∂', 'E2': '–î–∂', 'h': '–î–∂¬∑—Å', 'result': '–ì—Ü'}
    },
    
    # ========== –¢–ï–û–†–ò–Ø –û–¢–ù–û–°–ò–¢–ï–õ–¨–ù–û–°–¢–ò ==========
    '–†–µ–ª—è—Ç–∏–≤–∏—Å—Ç—Å–∫–∞—è –º–∞—Å—Å–∞': {
        'formula': 'm = m‚ÇÄ / ‚àö(1 - v¬≤/c¬≤)',
        'parameters': ['m0', 'v', 'c'],
        'calculation': 'm0 / sqrt(1 - (v/c)**2)',
        'units': {'m0': '–∫–≥', 'v': '–º/—Å', 'c': '–º/—Å', 'result': '–∫–≥'}
    },
    
    '–ü–æ–ª–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è': {
        'formula': 'E = m √ó c¬≤',
        'parameters': ['m', 'c'],
        'calculation': 'm * c**2',
        'units': {'m': '–∫–≥', 'c': '–º/—Å', 'result': '–î–∂'}
    },
    
    '–≠–Ω–µ—Ä–≥–∏—è –ø–æ–∫–æ—è —Ç–µ–ª–∞': {
        'formula': 'E‚ÇÄ = m √ó c¬≤',
        'parameters': ['m', 'c'],
        'calculation': 'm * c**2',
        'units': {'m': '–∫–≥', 'c': '–º/—Å', 'result': '–î–∂'}
    }
}

# –®–∞–≥ 4: –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –í–°–ï–• –§–û–†–ú–£–õ
def calculate_formula(formula_name, user_values):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –õ–Æ–ë–û–ô —Ñ–æ—Ä–º—É–ª—ã
    
    –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
    1. –ò—â–µ–º —Ñ–æ—Ä–º—É–ª—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≤ formula_definitions
    2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ —Å—Ç—Ä–æ–∫–µ 'calculation'
    4. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    
    formula_name: –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, '–ó–∞–∫–æ–Ω –û–º–∞')
    user_values: —Å–ª–æ–≤–∞—Ä—å —Å –≤–≤–µ–¥–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ {'U': 10, 'R': 5}
    """
    
    # 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞
    if formula_name not in formula_definitions:
        raise ValueError(f"‚ùå –§–æ—Ä–º—É–ª–∞ '{formula_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–µ")
    
    formula = formula_definitions[formula_name]
    
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞–Ω—ã
    missing_params = []
    for param in formula['parameters']:
        if param not in user_values:
            missing_params.append(param)
    
    if missing_params:
        raise ValueError(f"‚ùå –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: {', '.join(missing_params)}")
    
    # 3. –°–æ–∑–¥–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (sqrt, sin, cos –∏ —Ç.–¥.)
    # –Ω–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–¥–∞
    safe_env = {
        # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
        'sqrt': math.sqrt,
        'sin': math.sin, 'cos': math.cos, 'tan': math.tan,
        'asin': math.asin, 'acos': math.acos, 'atan': math.atan,
        'sinh': math.sinh, 'cosh': math.cosh, 'tanh': math.tanh,
        'exp': math.exp, 'log': math.log, 'log10': math.log10,
        # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        'pi': math.pi, 'e': math.e,
        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        'radians': math.radians, 'degrees': math.degrees,
        # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        'abs': abs, 'round': round
    }
    
    # 4. –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
    # –ù–∞–ø—Ä–∏–º–µ—Ä, user_values = {'U': 10, 'R': 5} —Å—Ç–∞–Ω—É—Ç U=10, R=5 –≤ —Ñ–æ—Ä–º—É–ª–µ
    for param, value in user_values.items():
        safe_env[param] = float(value)  # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–∞
    
    # 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    try:
        # eval –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –∫–æ–¥ Python, –Ω–æ –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
        result = eval(formula['calculation'], {"__builtins__": None}, safe_env)
        
        # 6. –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç–≤–µ—Ç
        return {
            'success': True,
            'result': round(result, 4),  # –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ 4 –∑–Ω–∞–∫–æ–≤
            'formula': formula['formula'],
            'result_with_units': f"{round(result, 4)} {formula['units'].get('result', '')}",
            'units': formula['units'].get('result', ''),
            'calculation_expr': formula['calculation'],
            'parameters_used': {p: user_values[p] for p in formula['parameters']}
        }
        
    except ZeroDivisionError:
        raise ValueError("‚ö†Ô∏è –î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è")
    except ValueError as e:
        raise ValueError(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö: {str(e)}")
    except Exception as e:
        raise ValueError(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏: {str(e)}")

# –®–∞–≥ 5: –ú–ê–†–®–†–£–¢–´ FLASK (–æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—á—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

@app.route('/')
def home():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º—É–ª"""
    return render_template('formulas.html', formulas=formulas)

@app.route('/api/calculate/<formula_name>', methods=['POST'])
def calculate(formula_name):
    """
    API endpoint –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ñ–æ—Ä–º—É–ª
    
    –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
    1. –ü–æ–ª—É—á–∞–µ–º JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    2. –í—ã–∑—ã–≤–∞–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é calculate_formula
    3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –æ—à–∏–±–∫—É –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
    """
    try:
        # 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        data = request.get_json()
        
        if not data:
            return jsonify({
                'success': False,
                'error': '‚ùå –ù–µ –ø–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞'
            }), 400
        
        # 2. –í—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–º–æ—â—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
        result = calculate_formula(formula_name, data)
        
        # 3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        return jsonify(result)
    
    except ValueError as e:
        # –õ–æ–≤–∏–º –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω–µ —Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Ç.–¥.)
        return jsonify({
            'success': False,
            'error': str(e)
        }), 400
    
    except Exception as e:
        # –õ–æ–≤–∏–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
        return jsonify({
            'success': False,
            'error': f'üí• –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {str(e)}'
        }), 500

# –®–∞–≥ 6: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô API –î–õ–Ø –§–†–û–ù–¢–ï–ù–î–ê
@app.route('/api/formula-info/<formula_name>', methods=['GET'])
def get_formula_info(formula_name):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ä–º—É–ª–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
    (–∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω—ã, –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ —Ç.–¥.)
    """
    if formula_name in formula_definitions:
        formula = formula_definitions[formula_name]
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
        param_hints = {}
        for param in formula['parameters']:
            param_hints[param] = {
                'unit': formula['units'].get(param, ''),
                'description': f'–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ {param}'
            }
        
        return jsonify({
            'success': True,
            'formula': formula['formula'],
            'parameters': formula['parameters'],
            'units': formula['units'],
            'param_hints': param_hints,
            'description': formula.get('description', ''),
            'note': formula.get('note', '')
        })
    
    return jsonify({
        'success': False,
        'error': '–§–æ—Ä–º—É–ª–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'
    }), 404

# –®–∞–≥ 7: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
if __name__ == '__main__':
    print("=" * 50)
    print("üöÄ –§–∏–∑–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω!")
    print(f"üìä –í—Å–µ–≥–æ —Ñ–æ—Ä–º—É–ª –≤ —Å–∏—Å—Ç–µ–º–µ: {len(formula_definitions)}")
    print("=" * 50)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
    print("\nüß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:")
    
    # –¢–µ—Å—Ç 1: –ó–∞–∫–æ–Ω –û–º–∞
    try:
        test_result = calculate_formula('–ó–∞–∫–æ–Ω –û–º–∞', {'U': 12, 'R': 4})
        print(f"‚úì –ó–∞–∫–æ–Ω –û–º–∞: U=12–í, R=4–û–º -> I={test_result['result']}–ê")
    except Exception as e:
        print(f"‚úó –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞: {e}")
    
    # –¢–µ—Å—Ç 2: –ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è
    try:
        test_result = calculate_formula('–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è', {'m': 2, 'v': 10})
        print(f"‚úì –ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è: m=2–∫–≥, v=10–º/—Å -> E={test_result['result']}–î–∂")
    except Exception as e:
        print(f"‚úó –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞: {e}")
    
    print("=" * 50)
    print("üåê –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: http://localhost:5000")
    print("=" * 50)
    
    app.run(debug=True, host='0.0.0.0', port=5000)
